## Context
弹弹消消乐游戏需要物理系统来处理小球运动和碰撞。参考 readme.md 中的设计，采用自实现的简单碰撞检测算法，无需引入第三方物理引擎。

## Goals / Non-Goals
- **Goals**:
  - 实现小球匀速运动
  - 实现小球与墙壁（左、右、上）的碰撞反弹
  - 实现小球与矩形砖块的碰撞检测
  - 计算碰撞后的正确反弹方向
  
- **Non-Goals**:
  - 不实现重力、摩擦力等复杂物理
  - 不实现小球之间的碰撞
  - 不实现旋转或角动量

## Decisions

### 1. 碰撞检测算法
- **Decision**: 使用圆形-矩形碰撞检测（最近点法）
- **Why**: 小球为圆形，砖块为矩形，最近点法是标准且高效的检测方式
- **Algorithm**:
  1. 找到矩形上距离圆心最近的点
  2. 计算该点到圆心的距离
  3. 如果距离小于圆半径，则发生碰撞

### 2. 反弹方向计算
- **Decision**: 根据碰撞位置确定反弹方向（水平/垂直）
- **Why**: 简化物理模型，提供可预测的反弹行为
- **Logic**:
  - 从左右侧碰撞：反转水平速度 (vx = -vx)
  - 从上下方碰撞：反转垂直速度 (vy = -vy)
  - 角落碰撞：同时反转两个方向

### 3. 运动模型
- **Decision**: 使用基于 delta time 的帧率无关运动
- **Formula**: `position += velocity * dt`
- **Why**: 确保在不同帧率下游戏体验一致

## Risks / Trade-offs
- **Risk**: 高速移动时可能穿透薄砖块（隧道效应）
  - **Mitigation**: 限制小球速度，或后续实现连续碰撞检测
- **Risk**: 角落碰撞判定可能不精确
  - **Mitigation**: 使用最近点方向作为反弹法向量

## Open Questions
- 是否需要实现碰撞预测以防止穿透？（当前阶段不需要）
