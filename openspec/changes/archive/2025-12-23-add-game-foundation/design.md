## Context
这是"弹弹消消乐"微信小游戏项目的初始搭建阶段。需要建立一个可扩展的游戏框架，支持后续的物理系统、碰撞检测、砖块系统等功能模块的开发。

**目标用户**: 全年龄段，尤其是15-35岁
**游戏类型**: 休闲益智弹球消砖块

## Goals / Non-Goals
**Goals:**
- 建立标准的微信小游戏项目结构
- 实现稳定的60fps游戏主循环
- 提供场景管理和切换机制
- 创建可扩展的配置系统

**Non-Goals:**
- 本阶段不实现具体游戏玩法（小球、砖块等）
- 本阶段不实现UI组件
- 本阶段不接入音效和广告系统

## Decisions

### 1. 渲染方案: Canvas 2D
- **决策**: 使用原生 Canvas 2D API
- **原因**: 游戏画面简单，Canvas 2D 足够满足需求，包体小，性能好
- **替代方案**: WebGL/Cocos Creator - 对于这种轻量级游戏过于复杂

### 2. 物理引擎: 自实现
- **决策**: 自行实现简单的碰撞检测和物理反弹
- **原因**: 游戏物理需求简单（圆-矩形碰撞、墙壁反弹），引入第三方库增加包体
- **替代方案**: Matter.js - 功能丰富但增加约100KB包体

### 3. 场景管理: 状态机模式
- **决策**: 使用简单的场景状态机，支持 loading/home/game/result 四个场景
- **原因**: 游戏流程线性简单，无需复杂的场景栈管理

### 4. 时间同步: Delta Time
- **决策**: 使用 delta time 进行物理和动画更新
- **原因**: 确保不同帧率下游戏表现一致

## Risks / Trade-offs
- **风险**: Canvas 2D 在低端机型上可能有性能瓶颈
  - **缓解**: 限制同屏对象数量，优化渲染批次
- **风险**: 自实现物理可能有精度问题
  - **缓解**: 充分测试边界情况，迭代优化碰撞算法

## Open Questions
- 是否需要支持横竖屏切换？（假设仅竖屏）
- 是否需要支持多分辨率适配？（假设使用固定设计分辨率）
